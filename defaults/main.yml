---
## -----------------
## バックアップ処理のベースディレクトリ
## -----------------
backup_base_dir: /backup

## -----------------
## バックアップスクリプト格納用ディレクトリ
## -----------------
backup_script_dir: "{{ backup_base_dir }}/script"

## -----------------
## バックアップデータ格納用ディレクトリ
## -----------------
backup_data_dir: "{{ backup_base_dir }}/data"

## -----------------
## バックアップの世代管理用ディレクトリ
## -----------------
backup_repo_dir: "{{ backup_base_dir }}/repo"

## -----------------
## バックアップ設定
## -----------------
backup_settings: {}
#   ## 各設定ごとにデータ格納用ディレクトリが自動で作成される
#   ## ---
#   ## 各設定ごとに作成されるデータ格納用ディレクトリ：{{ backup_data_dir }}/{{ backup_setting.key }}
#   ## ※作成されたデータ格納ディレクトリは「BACKUP_DATA_DIR」変数で参照可能
#   ## ---
#   wordpress:
#     ## バックアップ処理を実行するユーザー(必須)
#     user: wp_site
#     ## バックアップ処理を実行する時間(必須)
#     cron:
#       hour: 1
#       minute: 23
#     ## バックアップ処理を実行時のディレクトリ(任意)
#     ## (省略時：{{ backup_data_dir }}/{{ backup_setting.key }})
#     # chdir: "{{ backup_data_dir }}/{{ backup_setting.key }}"
#     ## バックアップ処理のコマンド(任意)
#     command: |
#       wp db export dump.sql --path /var/www/html
#       tar vcfz uploads.tar.gz /var/www/html/wp-content/uploads
#     ## resticを利用したバックアップデータの世代管理設定(任意)
#     restic:
#       ## バックアップ対象のディレクトリ
#       ## (省略時：{{ backup_data_dir }}/{{ backup_setting.key }})
#       ## ※`target`の指定が省略された場合は対象ディレクトリが自動で作成されます
#       # target: "{{ backup_data_dir }}/wordpress"
#       ## リポジトリの種類(省略時:local)
#       # repo_type: local
#       ## リポジトリ
#       ## (省略時：{{ backup_data_dir }}/{{ backup_setting.key }}))
#       ## ※`repo_path`の指定が省略され、かつ、`repo_type`が`local`とみなされた場合は対象ディレクトリが自動で作成されます
#       # repo_path: "{{ backup_repo_dir }}/wordpress"
#       ## リポジトリのパスワード
#       repo_password: very_5tr0ng_p@55w0rd
#       ## その他、環境変数
#       # environment: {}
#       ## `restic init`実行時のオプション
#       # init_options: []
#       ## `restic backup`実行時のオプション
#       # backup_options: []
#       ## `restic forget`実行時の--keep-*オプションの種別
#       ## (省略時：{{ backup_restic_forget_default_keep_type }})
#       # keep_type: daily
#       ## `restic forget`実行時の--keep-*オプションの値
#       ## (省略時：{{ backup_restic_forget_default_keep_value }})
#       # keep_value: 3
#     ## rcloneの設定(任意)
#     # rclone:
#     #   cloudflare_r2:
#     #     type: s3
#     #     provider: Cloudflare
#     #     access_key_id: "{{ lookup('env', 'CLOUDFLARE_R2_ACCESS_KEY_ID') }}"
#     #     secret_access_key: "{{ lookup('env', 'CLOUDFLARE_R2_SECRET_ACCESS_KEY') }}"
#     #     region: auto
#     #     bucket_acl: private
#     #     endpoint: "{{ lookup('env', 'CLOUDFLARE_R2_ENDPOINT') }}"

## -----------------
## リポジトリ種別の初期値
## ※設定値の値は「vars/main.yml」の「restic_allow_repo_types」変数を参照
## @see https://restic.readthedocs.io/en/stable/030_preparing_a_new_repo.html
## -----------------
backup_restic_default_repo_type: local

## -----------------
## 世代数の管理方法の初期値
## ※設定値の値は「vars/main.yml」の「restic_allow_forget_keep_types」変数を参照
## @see https://restic.readthedocs.io/en/stable/060_forget.html#removing-snapshots-according-to-a-policy
## -----------------
backup_restic_default_keep_type: daily

## -----------------
## 世代数の初期値
## -----------------
backup_restic_default_keep_value: 3

## ----------------
## `restic init`実行時の共通オプション
## ----------------
backup_restic_init_common_options: []
## ----------------
## `restic backup`実行時の共通オプション
## ----------------
backup_restic_backup_common_options:
  - --verbose

## ----------------
## `restic forget`実行時の共通オプション
## ----------------
backup_restic_forget_common_options:
  - --prune
