---
## -----------------
## バックアップ処理のベースディレクトリ
## -----------------
backup_base_dir: /backup

## -----------------
## バックアップスクリプト格納用ディレクトリ
## -----------------
backup_script_dir: "{{ backup_base_dir }}/script"

## -----------------
## バックアップデータ格納用ディレクトリ
## -----------------
backup_data_dir: "{{ backup_base_dir }}/data"

## -----------------
## バックアップの世代管理用ディレクトリ
## -----------------
backup_repo_dir: "{{ backup_base_dir }}/repo"

## -----------------
## バックアップ設定
## -----------------
backup_settings: {}
#   wordpress:
#     ## バックアップ処理を実行するユーザー(必須)
#     user: wp_site
#     ## バックアップ処理を実行時のディレクトリ
#     ## (※省略時：{{ backup_data_base_dir }}/{{ backup_setting.key }})
#     # chdir: "{{ backup_data_base_dir }}/{{ backup_setting.key }}"
#     ## バックアップ処理のコマンド
#     command: |
#       wp db export dump.sql --path /var/www/html
#       tar vcfz uploads.tar.gz /var/www/html/wp-content/uploads
#     ## バックアップ処理を実行する時間
#     cron:
#       hour: 1
#       minute: 23
#     ## resticを利用したバックアップデータの世代管理設定
#     restic:
#       ## バックアップ対象のディレクトリ
#       ## (※省略時：{{ backup_data_base_dir }}/{{ backup_setting.key }})
#       # target: "{{ backup_data_dir }}/wordpress"
#       ## リポジトリの種類(※省略時:local)
#       # repo_type: local
#       ## リポジトリ (※省略時：{{ backup_repo_dir }}/{{ backup_setting.key }})
#       # repo_path: "{{ backup_repo_dir }}/wordpress"
#       ## リポジトリのパスワード
#       repo_password: very_5tr0ng_p@55w0rd
#       ## その他、環境変数
#       # environment: {}
#       ## `restic init`実行時のオプション
#       # init_options: []
#       ## `restic backup`実行時のオプション
#       # backup_options: []
#       ## `restic forget`実行時の--keep-*オプションの種別
#       ## (※省略時：{{ backup_restic_forget_default_keep_type }})
#       # forget_keep_type: daily
#       ## `restic forget`実行時の--keep-*オプションの値
#       ## (※省略時：{{ backup_restic_forget_default_keep_value }})
#       # forget_keep_value: 3
#     ## rcloneの設定
#     # rclone:
#     #   cloudflare_r2:
#     #     type: s3
#     #     provider: Cloudflare
#     #     access_key_id: "{{ lookup('env', 'CLOUDFLARE_R2_ACCESS_KEY_ID') }}"
#     #     secret_access_key: "{{ lookup('env', 'CLOUDFLARE_R2_SECRET_ACCESS_KEY') }}"
#     #     region: auto
#     #     bucket_acl: private
#     #     endpoint: "{{ lookup('env', 'CLOUDFLARE_R2_ENDPOINT') }}"

## -----------------
## リポジトリ種別の初期値
## ※設定値の値は「vars/main.yml」の「restic_allow_repo_types」変数を参照
## @see https://restic.readthedocs.io/en/stable/030_preparing_a_new_repo.html
## -----------------
backup_restic_default_repo_type: local

## -----------------
## 世代数の管理方法の初期値
## ※設定値の値は「vars/main.yml」の「restic_allow_forget_keep_types」変数を参照
## @see https://restic.readthedocs.io/en/stable/060_forget.html#removing-snapshots-according-to-a-policy
## -----------------
backup_restic_forget_default_keep_type: daily

## -----------------
## 世代数の初期値
## -----------------
backup_restic_forget_default_keep_value: 3

## ----------------
## `restic init`実行時の共通オプション
## ----------------
backup_restic_init_common_options: []
## ----------------
## `restic backup`実行時の共通オプション
## ----------------
backup_restic_backup_common_options:
  - --verbose

## ----------------
## `restic forget`実行時の共通オプション
## ----------------
backup_restic_forget_common_options:
  - --prune
